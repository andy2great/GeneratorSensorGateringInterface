(this["webpackJsonpgenerator-sensor-gatering-interface"]=this["webpackJsonpgenerator-sensor-gatering-interface"]||[]).push([[0],{291:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a,c=n(10),r=n(0),o=n(12),s=n.n(o),i=n(27),l=n(39),u=n.n(l),m=n(115),b=n.n(m),f=n(116),p=n(117),O=n.n(p),h=n(308);!function(e){e[e.MOD_PERATION=0]="MOD_PERATION",e[e.TEMPERATURE=1]="TEMPERATURE",e[e.HUMIDITE=2]="HUMIDITE",e[e.CO=3]="CO",e[e.LPG=4]="LPG",e[e.DECIBEL=5]="DECIBEL",e[e.COURANT=6]="COURANT",e[e.VIBRATION=7]="VIBRATION"}(a||(a={}));var j="http://10.0.0.121:59595",d={getLastValue:function(){return fetch(j+"/senseurs/last").then((function(e){return e.json()}))},getGlobalChartValues:function(){return fetch(j+"/senseurs/chart").then((function(e){return e.json()}))},getSensorInfo:function(e){var t={name:"",type:"",symbole:""};switch(e){case a.MOD_PERATION:t.name="Mode Operation",t.type="modeOpr",t.symbole="";break;case a.TEMPERATURE:t.name="Temp\xe9rature",t.type="temp",t.symbole="\xb0C";break;case a.HUMIDITE:t.name="Humidit\xe9",t.type="hum",t.symbole="%";break;case a.CO:t.name="CO",t.type="co",t.symbole="PPM";break;case a.LPG:t.name="Propane",t.type="lpg",t.symbole="PPM";break;default:t.name="Not Found",t.type="autre",t.symbole=""}return t}},y=(n(291),function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),o=n[0],s=n[1],l=Object(r.useState)([]),m=Object(i.a)(l,2),p=m[0],j=m[1],y=Object(r.useState)({}),v=Object(i.a)(y,2),E=v[0],T=v[1],x=Object(r.useState)(a.TEMPERATURE),N=Object(i.a)(x,2),g=N[0],k=N[1];Object(r.useEffect)((function(){I()}),[]),Object(r.useEffect)((function(){R()}),[p,g]);var I=function(){d.getLastValue().then((function(e){var t=[];new Set(e.map((function(e){return e.location}))).forEach((function(n){var a={location:n,modeOpr:"NaN",temp:"NaN",hum:"NaN",co:"NaN",lpg:"NaN",autre:!0,temps:NaN};e.filter((function(e){return e.location===n})).forEach((function(e){var t=new Date(e.timestamp);a.temps=!a.temps&&"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds());var n=d.getSensorInfo(e.senseur);a["".concat(n.type)]=e.val})),t.push(a)})),s(t)})),d.getGlobalChartValues().then((function(e){j(e),R()}))},R=function(){var e=0,t=0,n=0,a=0,c=d.getSensorInfo(g),r=p.filter((function(e){return e._id.senseur===g})).map((function(c){return{name:c._id.location,data:c.val.map((function(c){var r=new Date(c.timestamp).getTime();return(!e||e>c.val)&&(e=c.val),(!t||t<c.val)&&(t=c.val),(!n||n>r)&&(n=r),(!a||a<r)&&(a=r),{x:r,y:c.val}}))}}));T({chart:{type:"line",zoomType:"x"},title:{text:c.name},xAxis:{type:"datetime",max:a+2e7,min:n-1e7},yAxis:{min:e-10,max:t+10,title:{text:"".concat(c.name," ").concat(c.symbole?"("+c.symbole+")":"")}},plotOptions:{series:{turboThreshold:0}},series:r.map((function(e){return{name:e.name,data:e.data}}))})};return Object(c.jsxs)("div",{className:"summary-content",children:[Object(c.jsx)("p",{className:"summary-title",children:"Sommaire"}),Object(c.jsx)(h.a,{css:"button",color:"primary",variant:"contained",onClick:function(){return I()},children:"Rafraichir"}),Object(c.jsxs)("div",{className:"summary-info",children:[Object(c.jsx)(O.a,{children:Object(c.jsx)(f.DataTables,{height:"auto",selectable:!1,showRowHover:!0,columns:[{key:"location",label:"Module"},{key:"modeOpr",label:"Act."},{key:"temp",label:"Temp"},{key:"hum",label:"Hum"},{key:"co",label:"CO"},{key:"lpg",label:"LPG"},{key:"autre",label:"Autre"},{key:"temps",label:"Temps"}],data:o,showCheckboxes:!1,onCellClick:function(t,n,a){0===n&&e.handler(a),k(n-1)},showFooterToolbar:!1})}),Object(c.jsx)(b.a,{highcharts:u.a,options:E})]})]})}),v=(n(294),function(e){return Object(c.jsxs)("div",{className:"parent",children:[Object(c.jsx)(h.a,{css:"button",color:"primary",variant:"contained",onClick:function(){return e.handler(null)},children:"Retour"}),"allo papa",Object(c.jsx)("div",{className:"enfant",children:"comment ca va"})]})}),E=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],o=function(e){a(e)};return Object(c.jsx)("div",{children:n?Object(c.jsx)(v,{handler:o}):Object(c.jsx)(y,{handler:o})})};u.a.setOptions({time:{timezoneOffset:(new Date).getTimezoneOffset()}});var T=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(E,{})})};s.a.render(Object(c.jsx)(T,{}),document.getElementById("root"))}},[[295,1,2]]]);
//# sourceMappingURL=main.d87da6b1.chunk.js.map